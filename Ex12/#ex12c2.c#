/*
* pgm’·Á’¼°’¤Î’²è’Áü’¥Ç’¡¼’¥¿’¤ò’¼õ’¤±’¼è’¤Ã’¤Æ,’º¸’±¦’È¿’Å¾’¤¹’¤ë’¡£
*
* ’½ª’Î»’¥³’¡¼’¥É
* 0 : ’Àµ’¾ï’½ª’Î»
* 1 : ’Æþ’ÎÏ’¥Ç’¡¼’¥¿’¤Î’·Á’¼°’¤¬’¤ª’¤«’¤·’¤¤
* 2 : ’Æþ’ÎÏ’¥Ç’¡¼’¥¿’¤Î’²è’ÁÇ’¿ô’¤Þ’¤¿’¤Ï’³¬’Ä´’¤¬’ÈÏ’°Ï’³°
* 3 : ’Æþ’ÎÏ’¥Ç’¡¼’¥¿’¤¬’¤ª’¤«’¤·’¤¤’¤«’¥Ç’¡¼’¥¿’¤¬’Â·’¤ï’¤Ê’¤¤’¤¦’¤Á’¤Ë’£Å’£Ï’£Æ’¤Ë’¤Ê’¤Ã’¤¿
* 4 : ’Æþ’ÎÏ’¥Ç’¡¼’¥¿’¤Î’²è’ÁÇ’¤Î’ÃÍ’¤¬’ÈÏ’°Ï’³°
*/
#include <stdio.h>
#include <stdlib.h>
#define MSIZE 800
#define COEF 1.5

main()
{
  int dat[MSIZE][MSIZE];
  int i, j, width, height, maxval;
  /* ’Æþ’ÎÏ */
  /* ’¥Õ’¥¡’¥¤’¥ë’·Á’¼°’¤Î’¥Á’¥§’¥Ã’¥¯ */
  /* ’¤³’¤Î’Éô’Ê¬’¤Ï’¥×’¥í’¥°’¥é’¥ß’¥ó’¥°’Æþ’Ìç’¤Î’ÈÏ’°Ï’¤ò’±Û’¤¨’¤Æ’¤¤’¤ë’¤Î’¤Ç’¡¢’¤³’¤Î’¤Þ’¤Þ’»È’¤Ã’¤Æ’²¼’¤µ’¤¤’¡£*/
  if (getchar() != 'P' || getchar() != '2'){
    fprintf(stderr, "’¥Ç’¡¼’¥¿’¤Î’·Á’¼°’¤¬’°ã’¤¤’¤Þ’¤¹\n");
    exit(1);
  }

  /* x,y’¤½’¤ì’¤¾’¤ì’¤Î’²è’ÁÇ’¿ô’¤ò’ÆÀ’¤ë */
  scanf("%d %d", &width, &height);
 
  /* Maxval’¡Ê’Çò’¤Î’ÃÍ’¡Ë’¤ò’ÆÀ’¤ë */
  scanf("%d",&maxval);
 
  /* ’²è’ÁÇ’¿ô’¤¬’ÈÏ’°Ï’³°’¤Î’¾ì’¹ç */
  if (width < 1 || height < 1 || width > MSIZE || height > MSIZE){
    fprintf(stderr, "’Àß’Äê’¥µ’¥¤’¥º’¤¬’ÈÏ’°Ï’³°’¤Ç’¤¹’¡£\n");
    exit(2);
  }

  /* Maxval’¤¬’ÈÏ’°Ï’³° */
  if (maxval < 1 || maxval >= 65536){
    fprintf(stderr, "’³¬’Ä´’¤¬’ÈÏ’°Ï’³°’¤Ç’¤¹\n");
    exit(2);
  }

  /* ’¼Â’ºÝ’¤Î’¥Ç’¡¼’¥¿’Æþ’ÎÏ */
  for (i = 0; i < height; i++){
    for (j = 0; j < width; j++){
      /* scanf’Æþ’ÎÏ’¥Ç’¡¼’¥¿’¤¬’¤ª’¤«’¤·’¤¤’¤«’£Å’£Ï’£Æ’¤Ë’¤Ê’¤Ã’¤¿’¾ì’¹ç */
      if(scanf("%d",&dat[i][j]) != 1){
        fprintf(stderr, "’¥Ç’¡¼’¥¿’Æþ’ÎÏ’¤Ë’°Û’¾ï’¤¬’¤¢’¤ê’¤Þ’¤¹\n");
        exit(3);
      }
      /* ’¥Ç’¡¼’¥¿’¤¬’ÈÏ’°Ï’³° */
      if (dat[i][j] < 0 || dat[i][j] > maxval){
        fprintf(stderr, "’¥Ç’¡¼’¥¿’¤¬’°Û’¾ï’¤Ç’¤·’¤¿\n");
        exit(4);
      }
    }
  }
  /* ’¤³’¤ì’¤è’¤ê’¾å’¤Ï’¤É’¤Î’¥×’¥í’¥°’¥é’¥à’¤â’¤Û’¤Ü’Æ±’¤¸ */

  /* ’½Ð’ÎÏ */
  /* ’ºÇ’½é’¤ËP2’¤Èx,y’¤Î’²è’ÁÇ’¿ô’¡¢Maxval’¤ò’½Ð’ÎÏ */
  printf("P2\n");
  printf("%d %d\n", width, height);
  printf("%d\n", maxval);

  /* ’¼Â’ºÝ’¤Î’¥Ç’¡¼’¥¿’½Ð’ÎÏ */
  for (i = 0; i < width; i++){
    for (j = 0; j < height; j++){
      if (maxval/2<=dat[i][j]){
	if (dat[i][j]*COEF <= maxval){
	  printf("%2d ",(int)dat[i][j]*COEF);
	} 
	if (dat[i][j]*COEF > maxval){
	  printf("%2d ",maxval);
	}
      }
      if((int)maxval/2>dat[i][j]){
	printf("%2d ",(int)dat[i][j]*(1/COEF)); 
      }
    }
    printf("\n");
  }
}
